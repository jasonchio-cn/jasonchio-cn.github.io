<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Jason's Blog - 人总是要变得越来越好</title><meta name="author" content="JasonChio"><meta name="copyright" content="JasonChio"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="让琐碎的记录变为成长的基石">
<meta property="og:type" content="website">
<meta property="og:title" content="Jason&#39;s Blog">
<meta property="og:url" content="https://blog.961110.xyz/page/2/index.html">
<meta property="og:site_name" content="Jason&#39;s Blog">
<meta property="og:description" content="让琐碎的记录变为成长的基石">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.961110.xyz/images/avatar.png">
<meta property="article:author" content="JasonChio">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.961110.xyz/images/avatar.png"><link rel="shortcut icon" href="https://blog.961110.xyz/images/favicon.png"><link rel="canonical" href="https://blog.961110.xyz/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"本博文距离上次更新已有","messageNext":"天，文中内容可能会过期，请自行辨别或联系博主。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Jason\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-12-17 16:17:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/iconfont.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.1.6/css/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiperstyle.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://blog.961110.xyz/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">49</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/gallery"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://blog.961110.xyz/images/index_img.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jason's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/gallery"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Jason's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/jasonchio-cn" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:zyb389120217@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://blog.961110.xyz/images/WeChat-QRCode.jpg" target="_blank" title="WeChat"><i class="fab fa-weixin"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=389120217&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/40974.html" title="Docker源码分析（六）—— 命令 docker stop 的执行">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/27/docker-moby-callvis.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker源码分析（六）—— 命令 docker stop 的执行"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/40974.html" title="Docker源码分析（六）—— 命令 docker stop 的执行">Docker源码分析（六）—— 命令 docker stop 的执行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-29T12:00:00.000Z" title="发表于 2021-11-29 20:00:00">2021-11-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/40974.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
博文分析的 Docker 源码基于 19.03 版本，阅读工具采用 Goland，追踪的是docker stop命令的执行过程。
第一次阅读 Docker 源码，如有纰漏还请轻喷，喷完希望能够通过邮件或者留言的方式指出问题。
限于篇幅以及关注重点的原因，部分个人认为不重要的代码会用省略号代替。
Tips: 如果图片看不清楚可以点击查看大图。

背景前面的博文已经分析了容器的创建和启动过程，秉持着有始有终的信条，所以本篇博文分析 docker stop 命令的执行过程。
分析的方式同样和前面几篇一样，从 Docker Client 开始，到 Docker Daemon 结束。
Docker Client调用链路是 main() --&gt; runDocker() --&gt; newDockerCommand() --&gt; AddCommands() --&gt; cmd.AddCommand() --&gt; container.NewContainerCommand() --&gt; cmd.AddCommand() --&gt; NewStopCommand() --&gt ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/52319.html" title="Docker 源码梳理文章索引暨容器生命周期相关源码梳理">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/29/2fe10549b3c93adcf3e25e7d0cff707e.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 源码梳理文章索引暨容器生命周期相关源码梳理"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/52319.html" title="Docker 源码梳理文章索引暨容器生命周期相关源码梳理">Docker 源码梳理文章索引暨容器生命周期相关源码梳理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-29T09:09:00.000Z" title="发表于 2021-11-29 17:09:00">2021-11-29</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/52319.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
持续更新中。。。

源码分析
Docker源码分析（一）—— docker run 命令在 Docker Client 中的执行
Docker源码分析（二）—— docker run 命令在 Docker Daemon中的执行
Docker源码分析（三）—— docker start 命令在 Docker Daemon中的执行
Docker源码分析（四）—— Docker Daemon 启动流程
Docker源码分析（五）—— 命令 docker inspect 的执行
Docker源码分析（六）—— 命令 docker stop 的执行
Docker源码分析（七）—— 命令 docker kill的执行
Docker源码分析（八）—— 命令 docker restart 的执行
Docker源码分析（九）—— 命令 docker pause 的执行
Docker源码分析（十）—— 命令 docker unpause 的执行
Docker源码分析（十一）—— 命令 docker rm 的执行

container 生命周期
    
        图1 container 生命周期 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/21441.html" title="Docker源码分析（五）—— 命令 docker inspect 的执行">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/27/docker-moby-callvis.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker源码分析（五）—— 命令 docker inspect 的执行"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/21441.html" title="Docker源码分析（五）—— 命令 docker inspect 的执行">Docker源码分析（五）—— 命令 docker inspect 的执行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-27T13:40:00.000Z" title="发表于 2021-11-27 21:40:00">2021-11-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/21441.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
博文分析的 Docker 源码基于 19.03 版本，阅读工具采用 Goland，追踪的是docker inspect命令的执行过程。
第一次阅读 Docker 源码，如有纰漏还请轻喷，喷完希望能够通过邮件或者留言的方式指出问题。
限于篇幅以及关注重点的原因，部分个人认为不重要的代码会用省略号代替。
Tips: 如果图片看不清楚可以点击查看大图。

背景想要获取 container 的相关信息，看到有 docker inspect containerID 这个命令而且返回了较为完备的 container 底层信息，所以对其进行简单的追踪。这个命令是 Docker Client 的命令，所以从 Docker Client 开始分析。
Docker Client调用链路是 main() --&gt; runDocker() --&gt; newDockerCommand() --&gt; AddCommands() --&gt; cmd.AddCommand() --&gt; container.NewContainerCommand() --&gt; cmd.AddCommand()  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/41554.html" title="编码开发规范">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/22/coding_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="编码开发规范"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/41554.html" title="编码开发规范">编码开发规范</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-22T07:51:00.000Z" title="发表于 2021-11-22 15:51:00">2021-11-22</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%95%99%E7%A8%8B/">教程</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/41554.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">项目命名规范
项目名称用汉字，而项目 URL 不要用拼音，尽量用英文
项目 URL 不用大写、下划线
项目 URL 不用有歧义的缩写，如 src, led

代码库命名英文：首先找官方的翻译

Git 规范分支规范每个需求一个分支
Git Flow都是双分支结构，一个开发分支，一个主分支。
简易 Git Flow
严格版简易 Git Flow分支命名命名以分支类型开头+数字+简易描述

Git add 规范
依赖包通过网络安装，进行依赖管理，不可以直接提交第三方包
build 的结果也不要提交上去
未发布到仓库的依赖包，可以创建一个仓库，放入需要的依赖包
不用的代码直接删除，需要的时候通过 git 历史找回

Git commit 规范 使用 git cz 工具
原子性提交：每次提交都是可回滚的（一个需求可以提交好几次）
Git push 规范主分支

禁止强制推送（push –force）
禁止篡改历史（reset），只可以 revert

开发分支

允许强制推送
允许 rebase

代码合并规范
直接合并会产生一条垃圾历史
压缩合并（Squash）适合合并无关痛痒的 commi ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/39632.html" title="中文文案排版指北">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/21/WLOP-sky.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="中文文案排版指北"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/39632.html" title="中文文案排版指北">中文文案排版指北</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-21T13:58:00.000Z" title="发表于 2021-11-21 21:58:00">2021-11-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%95%99%E7%A8%8B/">教程</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/39632.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
【转载】原文地址 www.quchao.net

前言日常生活、写博、工作、学习中，我们每个人都会遇到文案排版问题。借着新的一年，往后都延用本文新规范来写作，有机会我会再写一下整体大纲结构以及配色突出。  
统一中文文案、排版的相关用法，降低团队成员 / 访客之间的沟通阅读成本，增加网站气质。

空格「有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。 毕竟爱情跟书写都需要适时地留白。 与大家共勉之。」 ——vinta/paranoid-auto-spacing
中英文之间需要增加空格正确：  

在 LeanCloud 上，数据存储是围绕 AVObject 进行的。

错误：  

在 LeanCloud 上，数据存储是围绕AVObject进行的。
在 LeanCloud 上，数据存储是围绕AVObject 进行的。

完整的正确用法：  

在 LeanCloud 上，数据存储是围绕 AVObject 进行的。每个 AVObject 都包含了与 JSON 兼容的 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/2533.html" title="Docker源码分析（四）—— Docker Daemon 启动流程">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/09/docker-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker源码分析（四）—— Docker Daemon 启动流程"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2533.html" title="Docker源码分析（四）—— Docker Daemon 启动流程">Docker源码分析（四）—— Docker Daemon 启动流程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-21T10:45:00.000Z" title="发表于 2021-11-21 18:45:00">2021-11-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/2533.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
博文分析的 Docker 源码基于 19.03 版本，阅读工具采用 Goland，追踪的是 Docker Daemon 的启动过程。
第一次阅读 Docker 源码，如有纰漏还请轻喷，喷完希望能够通过邮件或者留言的方式指出问题。
限于篇幅以及关注重点的原因，部分个人认为不重要的代码会用省略号代替。
Tips: 如果图片看不清楚可以点击查看大图。

前言照例还是先摆出 Docker 的架构，架构在心中，源码轻松读。
在上两篇博文中跟踪了 Docker Daemon 中创建和运行容器的过程，但是缺失了像 Docker源码分析（一）—— docker run 命令在 Docker Client 中的执行 一文中，Daemon 客户端启动的过程跟踪，所以在本文中将对其启动过程进行简单分析。

    
        图1  Docker 架构（官网图） 
        图2 Docker 架构图（分组件）
    



在 Client 中调用ContainerStart()，向 Daemon 发送 resp, err := cli.post(ctx, &quot;/container ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/56133.html" title="Docker源码分析（三）—— docker start 命令在 Docker Daemon中的执行">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/09/docker-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker源码分析（三）—— docker start 命令在 Docker Daemon中的执行"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/56133.html" title="Docker源码分析（三）—— docker start 命令在 Docker Daemon中的执行">Docker源码分析（三）—— docker start 命令在 Docker Daemon中的执行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-19T02:45:00.000Z" title="发表于 2021-11-19 10:45:00">2021-11-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/56133.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
博文分析的 Docker 源码基于 19.03 版本，阅读工具采用 Goland，追踪的是docker start命令在 Docker Daemon 中的执行过程。
第一次阅读 Docker 源码，如有纰漏还请轻喷，喷完希望能够通过邮件或者留言的方式指出问题。
限于篇幅以及关注重点的原因，部分个人认为不重要的代码会用省略号代替。
Tips: 如果图片看不清楚可以点击查看大图。

前言照例还是先摆出 Docker 的架构，架构在心中，源码轻松读。
在上一篇博文中跟踪了 Docker Daemon 中创建容器的过程，下一步就是 Client 向 Daemon 发送容器启动命令，所以在这篇博文中跟踪的是 Daemon 启动容器的过程。

    
        图1  Docker 架构（官网图） 
        图2 Docker 架构图（分组件）
    


在 Client 中调用ContainerStart()，向 Daemon 发送 resp, err := cli.post(ctx, &quot;/containers/&quot;+containerID+&quot;/ ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/19054.html" title="Docker源码分析（二）—— docker run 命令在 Docker Daemon中的执行">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/09/docker-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker源码分析（二）—— docker run 命令在 Docker Daemon中的执行"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/19054.html" title="Docker源码分析（二）—— docker run 命令在 Docker Daemon中的执行">Docker源码分析（二）—— docker run 命令在 Docker Daemon中的执行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-17T14:00:00.000Z" title="发表于 2021-11-17 22:00:00">2021-11-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/19054.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
博文分析的 Docker 源码基于 19.03 版本，阅读工具采用 Goland，追踪的是docker run命令在 Docker Daemon 中的执行过程。
第一次阅读 Docker 源码，如有纰漏还请轻喷，喷完希望能够通过邮件或者留言的方式指出问题。
限于篇幅以及关注重点的原因，部分个人认为不重要的代码会用省略号代替。
Tips: 如果图片看不清楚可以点击查看大图。

前言照例还是先摆出 Docker 的架构，架构在心中，源码轻松读。
在上一篇博文中跟踪了docker run命令在 Docker Client 的执行过程，于是就有了本篇博文———分析 docker run在 Docker Daemon 中的执行过程。

    
        图1  Docker 架构（官网图） 
        图2 Docker 架构图（分组件）
    

上篇博文提到，在 Docker Client 中调用：
`serverResp, err := cli.post(ctx, "/containers/create", query, body, nil)`
`resp, err := ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/64829.html" title="Docker源码分析（一）—— docker run 命令在 Docker Client 中的执行">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/09/docker-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker源码分析（一）—— docker run 命令在 Docker Client 中的执行"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/64829.html" title="Docker源码分析（一）—— docker run 命令在 Docker Client 中的执行">Docker源码分析（一）—— docker run 命令在 Docker Client 中的执行</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-17T01:47:00.000Z" title="发表于 2021-11-17 09:47:00">2021-11-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/64829.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">
博文分析的 Docker 源码基于 19.03 版本，阅读工具采用 Goland，追踪的是docker run命令在 Docker Client 中的执行过程。
第一次阅读 Docker 源码，如有纰漏还请轻喷，喷完希望能够通过邮件或者留言的方式指出问题。
限于篇幅以及关注重点的原因，部分个人认为不重要的代码会用省略号代替。
Tips: 如果图片看不清楚可以点击查看大图。

前言
    
        图1  Docker 架构（官网图） 
        图2 Docker 架构图（分组件）
    


Docker是一个典型的 C/S 架构，Docker Client作为直接与用户交互的一端，其作用是将用户的命令解析然后通过REST API传递给 Docker Daemon 执行（虽然真正执行的也不是 Docker Daemon）。
docker run 命令在 Docker Client 中的执行Dcoker Client 作为 Docker 整个架构中的最前端，其主要作用就是和用户交互。当用户输入命令时，最终的执行是靠更下层的 Docker Daemon，所以分析的流程 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/4242.html" title="Docker架构">     <img class="post_bg" src="https://images.961110.xyz/images/2021/11/09/docker-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker架构"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/4242.html" title="Docker架构">Docker架构</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-10T13:17:00.000Z" title="发表于 2021-11-10 21:17:00">2021-11-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/posts/4242.html#post-comment"></a><span class="article-meta-label"> 条评论</span></span></div><div class="content">Docker 架构及组件作用之所以要分成这么多个组件共同作用，原因可能看下图就能略知一二。

整个容器生态是非常庞大的，有不同的平台，不同的架构，不同的客户端。如果想要形成一个标准，势必要对功能进行拆分来暴露出统一的 API，这样组件可以相互结合来应对不同的场景。
名词解释OCI现在有两个标准：

the Runtime Specification (runtime-spec) ，指出如何运行已经解压到disk上的filesystem bundle
the Image Specification (image-spec)

都是为了兼容性和可移植的特性。其中runc就是一种runtime spec的实现。
bundlefilesystem bundle 就是一个目录，提供 config.json 文件和 rootfs 文件系统
configconfig 描述了当前容器的配置: OCI 版本，启动程序路径与参数，挂载哪些文件系统，平台相关的比如 cgroup, namespaces, cpu quota 等等
状态runc 启动的容器，都会把状态文件 state.json 存到一个地方， ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://blog.961110.xyz/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">JasonChio</div><div class="author-info__description">让琐碎的记录变为成长的基石</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">49</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a class="button--animated" id="card-info-btn" href="https://blog.961110.xyz/images/WeChat-QRCode.jpg"><i class="fab fa-weixin"></i><span>等一个小红点</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/jasonchio-cn" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:zyb389120217@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://blog.961110.xyz/images/WeChat-QRCode.jpg" target="_blank" title="WeChat"><i class="fab fa-weixin"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=389120217&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">本博客正处于测试阶段，如有问题或建议请联系博主，谢谢！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/11241.html" title="树莓派 SD 卡无损扩容方案——克隆到更大容量的SD卡"><img src="https://images.961110.xyz/images/2021/10/26/frp-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="树莓派 SD 卡无损扩容方案——克隆到更大容量的SD卡"/></a><div class="content"><a class="title" href="/posts/11241.html" title="树莓派 SD 卡无损扩容方案——克隆到更大容量的SD卡">树莓派 SD 卡无损扩容方案——克隆到更大容量的SD卡</a><time datetime="2021-12-17T07:46:00.000Z" title="发表于 2021-12-17 15:46:00">2021-12-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/20654.html" title="使用 dlv Debug dockerd(Docker Daemon) 的方法"><img src="https://images.961110.xyz/images/2021/12/16/dlv-mini-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 dlv Debug dockerd(Docker Daemon) 的方法"/></a><div class="content"><a class="title" href="/posts/20654.html" title="使用 dlv Debug dockerd(Docker Daemon) 的方法">使用 dlv Debug dockerd(Docker Daemon) 的方法</a><time datetime="2021-12-15T09:47:00.000Z" title="发表于 2021-12-15 17:47:00">2021-12-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/21410.html" title="Linux 下 golang 多版本管理器"><img src="https://images.961110.xyz/images/2021/12/15/golang-logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux 下 golang 多版本管理器"/></a><div class="content"><a class="title" href="/posts/21410.html" title="Linux 下 golang 多版本管理器">Linux 下 golang 多版本管理器</a><time datetime="2021-12-15T08:44:00.000Z" title="发表于 2021-12-15 16:44:00">2021-12-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2083.html" title="解决 Windows 10 电池模式下屏幕亮度低色彩泛白的问题"><img src="https://images.961110.xyz/images/2021/11/09/windows-10-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解决 Windows 10 电池模式下屏幕亮度低色彩泛白的问题"/></a><div class="content"><a class="title" href="/posts/2083.html" title="解决 Windows 10 电池模式下屏幕亮度低色彩泛白的问题">解决 Windows 10 电池模式下屏幕亮度低色彩泛白的问题</a><time datetime="2021-12-07T02:52:00.000Z" title="发表于 2021-12-07 10:52:00">2021-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/53979.html" title="Docker 日志管理机制"><img src="https://images.961110.xyz/images/2021/12/06/docker-logs.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 日志管理机制"/></a><div class="content"><a class="title" href="/posts/53979.html" title="Docker 日志管理机制">Docker 日志管理机制</a><time datetime="2021-12-07T02:30:00.000Z" title="发表于 2021-12-07 10:30:00">2021-12-07</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">17</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BB%A3%E7%A0%81/"><span class="card-category-list-name">代码</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"><span class="card-category-list-name">基础知识</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%95%99%E7%A8%8B/"><span class="card-category-list-name">教程</span><span class="card-category-list-count">25</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%99%BA%E8%83%BD%E7%BD%91%E8%81%94%E6%B1%BD%E8%BD%A6/"><span class="card-category-list-name">智能网联汽车</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/"><span class="card-category-list-name">生活</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/" style="font-size: 1.27em; color: rgb(37, 135, 60)">树莓派</a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.45em; color: rgb(98, 137, 118)">教程</a><a href="/tags/%E9%85%8D%E7%BD%AE/" style="font-size: 1.24em; color: rgb(62, 91, 17)">配置</a><a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 1.15em; color: rgb(191, 146, 190)">生活</a><a href="/tags/%E7%A7%9F%E6%88%BF/" style="font-size: 1.15em; color: rgb(192, 72, 60)">租房</a><a href="/tags/Linux/" style="font-size: 1.33em; color: rgb(66, 54, 121)">Linux</a><a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 1.21em; color: rgb(130, 15, 70)">代理</a><a href="/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/" style="font-size: 1.15em; color: rgb(88, 183, 97)">科学上网</a><a href="/tags/zsh/" style="font-size: 1.15em; color: rgb(24, 104, 78)">zsh</a><a href="/tags/shell/" style="font-size: 1.15em; color: rgb(9, 166, 36)">shell</a><a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 1.15em; color: rgb(28, 89, 80)">游戏</a><a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size: 1.15em; color: rgb(167, 115, 86)">监控</a><a href="/tags/VMware/" style="font-size: 1.15em; color: rgb(117, 117, 190)">VMware</a><a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 1.15em; color: rgb(38, 121, 71)">虚拟机</a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.42em; color: rgb(195, 63, 86)">笔记</a><a href="/tags/%E6%AF%95%E8%AE%BE/" style="font-size: 1.36em; color: rgb(5, 106, 170)">毕设</a><a href="/tags/Docker/" style="font-size: 1.39em; color: rgb(114, 179, 32)">Docker</a><a href="/tags/%E5%9B%BE%E5%BA%8A/" style="font-size: 1.15em; color: rgb(2, 26, 77)">图床</a><a href="/tags/Python/" style="font-size: 1.15em; color: rgb(110, 46, 117)">Python</a><a href="/tags/frp/" style="font-size: 1.15em; color: rgb(91, 16, 34)">frp</a><a href="/tags/Docker%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91/" style="font-size: 1.15em; color: rgb(92, 187, 155)">Docker源码编译</a><a href="/tags/git/" style="font-size: 1.15em; color: rgb(114, 188, 129)">git</a><a href="/tags/Powershell/" style="font-size: 1.15em; color: rgb(52, 27, 192)">Powershell</a><a href="/tags/C/" style="font-size: 1.15em; color: rgb(99, 199, 144)">C++</a><a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 1.15em; color: rgb(54, 29, 80)">基础知识</a><a href="/tags/Windows-10/" style="font-size: 1.18em; color: rgb(25, 43, 63)">Windows 10</a><a href="/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 1.3em; color: rgb(105, 112, 146)">源码分析</a><a href="/tags/%E5%86%85%E6%A0%B8%E8%A3%81%E5%89%AA/" style="font-size: 1.15em; color: rgb(139, 87, 45)">内核裁剪</a><a href="/tags/golang/" style="font-size: 1.15em; color: rgb(18, 171, 56)">golang</a><a href="/tags/%E8%B0%83%E8%AF%95/" style="font-size: 1.15em; color: rgb(97, 59, 29)">调试</a><a href="/tags/ARM/" style="font-size: 1.15em; color: rgb(83, 22, 57)">ARM</a><a href="/tags/%E4%BB%A3%E7%A0%81%E4%BC%98%E5%8C%96/" style="font-size: 1.15em; color: rgb(163, 117, 98)">代码优化</a><a href="/tags/%E6%99%BA%E8%83%BD%E7%BD%91%E8%81%94%E6%B1%BD%E8%BD%A6/" style="font-size: 1.15em; color: rgb(65, 100, 108)">智能网联汽车</a><a href="/tags/%E9%98%85%E8%AF%BB/" style="font-size: 1.15em; color: rgb(16, 192, 120)">阅读</a><a href="/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" style="font-size: 1.15em; color: rgb(109, 109, 81)">进程管理</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">十一月 2021</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span><span class="card-archive-list-count">18</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">十月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/09/"><span class="card-archive-list-date">九月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/07/"><span class="card-archive-list-date">七月 2020</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/06/"><span class="card-archive-list-date">六月 2020</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">49</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-09-09T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">76.7k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-12-17T08:17:47.033Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By JasonChio</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => { 
  const getCommentUrl = () => {
    const eleGroup = document.querySelectorAll('#recent-posts .article-title')
    let urlArray = []
    eleGroup.forEach(i=>{
      urlArray.push(i.getAttribute('href'))
    })
    return urlArray
  }

  const getCount = () => {
    const runTwikoo = () => {
      twikoo.getCommentsCount({
        envId: 'blog-8gnb16sc8c17d918',
        region: '',
        urls: getCommentUrl(),
        includeReply: false
      }).then(function (res) {
        document.querySelectorAll('#recent-posts .twikoo-count').forEach((item,index) => {
          item.innerText = res[index].count
        })
      }).catch(function (err) {
        console.log(err)
      })
    }

      if (typeof twikoo === 'object') {
        runTwikoo()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
      }
  }

  window.pjax ? getCount() : window.addEventListener('load', getCount)

})()</script><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "让琐碎的记录变为成长的基石".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '让琐碎的记录变为成长的基石'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start -->
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.16/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?jasonchio-cn";
            var git_color =['#ebedf0', '#f0fff4', '#dcffe4', '#bef5cb', '#85e89d', '#34d058', '#28a745', '#22863a', '#176f2c', '#165c26', '#144620'];
            var git_user ="jasonchio-cn";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style>undefined</style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/52319.html" alt=""><img width="48" height="48" src="https://images.961110.xyz/images/2021/11/29/2fe10549b3c93adcf3e25e7d0cff707e.png" alt="" onerror="this.src=https://cdn.jsdelivr.net/npm/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-11-29</span><a class="blog-slider__title" href="posts/52319.html" alt="">Docker 源码梳理文章索引暨容器生命周期相关源码梳理</a><div class="blog-slider__text">置顶文章，要不点进来看看？</div><a class="blog-slider__button" href="posts/52319.html" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.1.6/js/swiper.min.js"></script><script defer data-pjax src="https://cdn.jsdelivr.net/npm/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>